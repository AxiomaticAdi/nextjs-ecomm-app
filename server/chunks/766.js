exports.id=766,exports.ids=[766],exports.modules={5951:(t,e,a)=>{let n={addf5e2937a9d6b768b9d4f9409437b1f0965fa2:()=>Promise.resolve().then(a.bind(a,1221)).then(t=>t.incrementProductQuantity)};async function endpoint(t,...e){let a=await n[t]();return a.apply(null,e)}t.exports={addf5e2937a9d6b768b9d4f9409437b1f0965fa2:endpoint.bind(null,"addf5e2937a9d6b768b9d4f9409437b1f0965fa2")}},7772:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>AddToCartButton});var n=a(80);function CartIcon(){return n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})})}var r=a(9885);function AddToCartButton({productId:t,price:e=0,isPrimaryColor:a=!0,incrementProductQuantity:i}){let[d,s]=(0,r.useTransition)(),[c,o]=(0,r.useState)(!1);return n.jsx(n.Fragment,{children:(0,n.jsxs)("button",{className:`btn ${a?"btn-primary":"btn-secondary"}`,onClick:()=>{o(!1),s(async()=>{await i(t),o(!0)})},children:[`$ ${e}`," ",n.jsx(CartIcon,{})," ",d&&n.jsx("span",{className:"loading loading-spinner loading-md"}),!d&&c&&n.jsx("span",{className:"text-success",children:"Added to cart!"})]})})}},437:(t,e,a)=>{"use strict";a.d(e,{ZP:()=>c});var n=a(7536);let r=(0,n.createProxy)(String.raw`/Users/adi/Documents/Coding/Projects/ecomm-app/src/components/AddToCartButton.tsx`),{__esModule:i,$$typeof:d}=r,s=r.default,c=s},2810:(t,e,a)=>{"use strict";a.d(e,{Z:()=>d});var n=a(3524);let r=globalThis,i=r.prisma??new n.PrismaClient,d=i},1221:(t,e,a)=>{"use strict";a.r(e),a.d(e,{incrementProductQuantity:()=>incrementProductQuantity});var n=a(459),r=a(2810),i=a(9859);async function createCart(){let t=await r.Z.cart.create({data:{}});return(0,i.cookies)().set("localCartId",t.id),{...t,items:[],size:0,subtotal:0}}async function getCart(){let t=i.cookies().get("localCartId")?.value,e=t?await r.Z.cart.findUnique({where:{id:t},include:{items:{include:{product:!0}}}}):null;return e?{...e,size:e.items.reduce((t,e)=>t+e.quantity,0),subtotal:e.items.reduce((t,e)=>t+e.quantity*e.product.price,0)}:null}var d=a(561);async function incrementProductQuantity(t){let e=await getCart()??await createCart(),a=e.items.find(e=>e.productId===t);a?await r.Z.cartItem.update({where:{id:a.id},data:{quantity:{increment:1}}}):await r.Z.cartItem.create({data:{cartId:e.id,productId:t,quantity:1}}),(0,d.revalidatePath)("/products/[id]")}(0,a(1419).h)([incrementProductQuantity]),(0,n.U)("addf5e2937a9d6b768b9d4f9409437b1f0965fa2",null,incrementProductQuantity)}};